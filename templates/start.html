<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>üé∞ LottoLife ‚Äî Create Your Story</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#050810;--panel:#0e1526;--line:#1b233a;--ink:#f4f7ff;--muted:#94a3c4;--brand:#0d6efd;--accent:#7c5cff;--good:#22c55e;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:'Jost',sans-serif;background:radial-gradient(1100px 750px at 65% -20%,rgba(124,92,255,.35),rgba(5,8,16,.92)),#050810;color:var(--ink);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
  main{max-width:960px;width:100%;background:rgba(13,22,44,0.9);border:1px solid rgba(124,92,255,0.35);border-radius:26px;padding:30px 34px;box-shadow:0 40px 120px rgba(2,6,16,0.6);backdrop-filter:blur(20px)}
  h1{margin:0;font-size:2.2rem;font-weight:800}
  p.lead{margin:8px 0 24px;color:#bfc8e6}
  form{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
  label{display:flex;flex-direction:column;gap:6px;font-size:14px;color:var(--muted);font-weight:500}
  input,select,textarea{padding:12px 14px;border-radius:12px;border:1px solid rgba(124,92,255,0.45);background:rgba(8,12,25,0.9);color:var(--ink);font-family:inherit;font-size:16px}
  textarea{min-height:120px;grid-column:span 2}
  .actions{grid-column:span 2;display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-top:10px}
  button{background:linear-gradient(135deg,var(--brand),var(--accent));border:none;color:#fff;font-weight:700;padding:14px 24px;border-radius:16px;cursor:pointer;font-size:16px;box-shadow:0 16px 45px rgba(13,110,253,0.35);transition:transform .2s ease}
  button:hover{transform:translateY(-1px)}
  .preview{margin-top:28px;background:#0b1428;border-radius:22px;border:1px solid rgba(124,92,255,0.35);padding:20px 24px;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}
  .tile{background:rgba(16,27,52,0.9);border-radius:18px;padding:16px;border:1px solid rgba(124,92,255,0.2)}
  .tile span{display:block;font-size:13px;text-transform:uppercase;letter-spacing:.08em;color:#9fb0d6;margin-bottom:6px}
  .tile strong{font-size:20px}
  .tagline{font-size:12px;color:#7ea2ff;text-transform:uppercase;letter-spacing:.12em;margin-bottom:6px}
  .grid-col2{grid-column:span 2}
  @media(max-width:720px){main{padding:26px}textarea{grid-column:span 1}.actions{grid-column:span 1;flex-direction:column;align-items:stretch}}
</style>
</head>
<body>
<main>
  <div class="tagline">BUILD YOUR LEGEND</div>
  <h1>Design your lotto life</h1>
  <p class="lead">Tell us who you are, where you live, and how wild you want to spend. We‚Äôll simulate the taxes, investments, lifestyle burn, and risky bets so you can see how long your fortune lasts.</p>
  <form action="/startgame" method="POST" id="startForm">
    <label>üßë Your name
      <input type="text" name="name" placeholder="Jordan Dreamer" required>
    </label>
    <label>üíµ Jackpot size
      <input type="number" name="amount" id="amount" placeholder="10000000" required>
    </label>
    <label>üìç Home state
      <select name="state" id="state" required>
        {% for abbr, rate in STATE_TAX.items()|sort %}
        <option value="{{ abbr }}">{{ abbr }} ({{ (rate*100)|round(2) }}%)</option>
        {% endfor %}
      </select>
    </label>
    <label>üè¶ Payout style
      <select name="payout" id="payout">
        <option value="lump">Lump sum (cash today)</option>
        <option value="annuity">Annuity (30-year stream)</option>
      </select>
    </label>
    <label>üß† Money personality
      <select name="profile" id="profile">
        <option value="conservative">Conservative planner</option>
        <option value="balanced" selected>Balanced investor</option>
        <option value="yolo">High-roller YOLO</option>
      </select>
    </label>
    <label>üé≠ Lifestyle vibe
      <select name="lifestyle" id="lifestyle">
        <option value="modest">Modest reset</option>
        <option value="smart" selected>Smart flex</option>
        <option value="lavish">Lavish legend</option>
      </select>
    </label>
    <label class="grid-col2">üìù Dream headline
      <textarea name="goal" id="goal" placeholder="Example: Retire my parents, start a studio, and fund STEM scholarships."></textarea>
    </label>
    <div class="actions">
      <button type="submit">Launch Simulation ‚Üí</button>
      <div style="color:#8ea2d8;font-size:14px">You can change everything inside the game. We autosave progress.</div>
    </div>
  </form>

  <div class="preview" id="preview">
    <div class="tile"><span>After Federal Tax</span><strong id="prevFed">$0</strong></div>
    <div class="tile"><span>After State Tax</span><strong id="prevState">$0</strong></div>
    <div class="tile"><span>Take-home Net</span><strong id="prevNet">$0</strong></div>
    <div class="tile"><span>Starting Wallet</span><strong id="prevWallet">$0</strong><div style="font-size:12px;color:#7fa3ff">80% of net in cash</div></div>
    <div class="tile"><span>Initial Savings</span><strong id="prevSavings">$0</strong><div style="font-size:12px;color:#7fa3ff">20% tucked away</div></div>
    <div class="tile"><span>Monthly Lifestyle Burn (est.)</span><strong id="prevLifestyle">$0</strong><div style="font-size:12px;color:#7fa3ff">Based on vibe + profile</div></div>
  </div>
</main>
<script>
const STATE_TAX = {{ STATE_TAX|tojson }};
const FED_TAX = {{ FEDERAL_TAX }};
const $ = s => document.querySelector(s);
function fmt(n){return Number(n||0).toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0});}
function estLifestyle(net, profile, lifestyle){
  const base = net * 0.012; // base monthly burn ~1.2% of net
  const multipliers = {modest:0.6, smart:1.0, lavish:1.8};
  const profileBoost = {conservative:0.8, balanced:1, yolo:1.3};
  return Math.min(net/6, base * (multipliers[lifestyle]||1) * (profileBoost[profile]||1));
}
function recalc(){
  const amt = Number($('#amount').value.replace(/,/g,''))||0;
  const state = $('#state').value;
  const profile = $('#profile').value;
  const vibe = $('#lifestyle').value;
  const payout = $('#payout').value;
  let working = amt;
  let fed = 0;
  let stateTax = 0;
  if(payout === 'annuity'){
    const years = 30;
    const rate = 0.04;
    const annuity = amt ? (amt * rate) / (1 - Math.pow(1+rate,-years)) : 0;
    working = annuity * years * 0.55; // approx tax withheld over time
  }
  fed = working * FED_TAX;
  stateTax = working * (STATE_TAX[state] || 0);
  const afterFederal = working - fed;
  const afterState = working - stateTax;
  const net = Math.max(0, working - fed - stateTax);
  const savings = net * 0.20;
  const wallet = net - savings;
  const lifestyle = estLifestyle(net, profile, vibe);
  $('#prevFed').textContent = fmt(afterFederal);
  $('#prevState').textContent = fmt(afterState);
  $('#prevNet').textContent = fmt(net);
  $('#prevWallet').textContent = fmt(wallet);
  $('#prevSavings').textContent = fmt(savings);
  $('#prevLifestyle').textContent = fmt(lifestyle);
}
['#amount','#state','#profile','#lifestyle','#payout'].forEach(sel=>{
  const el = document.querySelector(sel);
  if(el){el.addEventListener('input',recalc);el.addEventListener('change',recalc);}  
});
recalc();
</script>
</body>
</html>
